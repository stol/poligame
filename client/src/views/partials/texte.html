<h4><a href="/textes/{{texte.id}}">{{texte.text}}</a></h4>

<p><a href="{{texte.link}}">Lien vers le texte complet</a></p>

<p><b>Extrait : </b></p>

<p>{{texte.description}}</p>

<div ng-switch on="texte.mode">
	<div ng-switch-when="past">
		Ce texte a déjà été voté, et discuté le <b>{{texte.date_end()}}</b>
		<div class="row">
			<div results="net" class="span4"></div>
			<div results="assemblee" class="span4"></div>
		</div>
		<div ng-switch on="!!texte.stats">
			<div ng-switch-when="false">
				<a href="/textes/{{texte.id}}">Cliquez ici pour obtenir plus d'information sur les votes</a>
			</div>
			<div ng-switch-default>
				<h4>Vous pouvez affiner les résultats du vote par :</h4>
				<div class="btn-group">
		        	<button type="button" class="btn" ng-model="moreInfo" btn-radio="'csps'">Catégorie socio-professionnelle</button>
		        	<button type="button" class="btn" ng-model="moreInfo" btn-radio="'bords'">Sensibilité politique</button>
		        	<button type="button" class="btn" ng-model="moreInfo" btn-radio="'genders'">Sexe</button>
		        	<button type="button" class="btn" ng-model="moreInfo" btn-radio="'ages'">Age</button>
		    	</div>
		    	<div ng-switch on="moreInfo">
		    		<div class="text-center" ng-switch-when="csps">
						<div results="csps"></div>
		    		</div>
		    		<div class="text-center" ng-switch-when="bords">
						<div results="bords"></div>
		    		</div>
		    		<div class="text-center" ng-switch-when="genders">
						<div results="genders"></div>
		    		</div>
		    		<div class="text-center" ng-switch-when="ages">
						<div results="ages"></div>
		    		</div>
		    	</div>
			</div>
		</div>
	</div>
	<div ng-switch-when="current">
		<div ng-switch on="texte.isVoted()">
			<div class="text-center" ng-switch-when="true">
				<button class="btn" disabled>Vous avez déjà voté !</button>
			</div>
			<div class="text-center" ng-switch-default>
				<button type="submit" ng-model="radio" class="btn btn-primary" name="vote" value="1"
					ng-click="openPopinAndVote(1,texte)"
					ng-class="{active : texte.isVoted(1)}"
				>Pour</button>
				<button type="submit" ng-model="radio" class="btn btn-danger" name="vote" value="2"
					ng-click="openPopinAndVote(2,texte)"
					ng-class="{active : texte.isVoted(2)}"
				>Contre</button>
				<button type="submit" ng-model="radio" class="btn btn-warning" name="vote" value="0"
					ng-click="openPopinAndVote(0,texte)"
					ng-class="{active : texte.isVoted(0)}"
				>Absention</button>
			</div>

			<div ng-switch on="texte.votes.actives">
				<div ng-switch-default>
					Aucun vote pour l'instant. Le vote se termine <span my-current-time></span>
				</div>
			</div>
		</div>
	</div>
	<div ng-switch-when="future">
		Ce texte n'est pas encore en discussion. Le vote sera ouvert le <b>{{texte.date_start()}}</b>
	</div>
</div>
