<h4><a href="/textes/{{texte.id}}">{{texte.text}}</a></h4>

<div ng-switch on="texte.mode">
	<div ng-switch-when="past">
		Ce texte a déjà été voté, et discuté le <b>{{texte.date_end()}}</b>
		<div my-chart="texte"></div>
	</div>
	<div ng-switch-when="current">
		<div ng-switch on="texte.isVoted()">
			<div class="text-center" ng-switch-when="true">
				Vous avez déjà voté !
			</div>
			<div class="text-center" ng-switch-default>
				<button type="submit" ng-model="radio" class="btn btn-primary" name="vote" value="1"
					ng-click="setChoice(1,texte)"
					ng-class="{active : texte.isVoted(1)}"
				>Pour</button>
				<button type="submit" ng-model="radio" class="btn btn-danger" name="vote" value="2"
					ng-click="setChoice(2,texte)"
					ng-class="{active : texte.isVoted(2)}"
				>Contre</button>
				<button type="submit" ng-model="radio" class="btn btn-warning" name="vote" value="0"
					ng-click="setChoice(0,texte)"
					ng-class="{active : texte.isVoted(0)}"
				>Absention</button>
			</div>

			<div ng-switch on="texte.votes.actives">
				<div my-chart="texte"></div>
				<div ng-switch-default>
					Aucun vote pour l'instant. Le vote se termine <span my-current-time></span>
				</div>
			</div>
		</div>
	</div>
	<div ng-switch-when="future">
		Ce texte n'est pas encore en discussion. Le vote sera ouvert le <b>{{texte.date_start()}}</b>
	</div>
</div>
